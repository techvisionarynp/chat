<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>TV AI Chatbot: ask me anything</title>
    <style>
        body { font-family: Arial, sans-serif; margin: 20px; }
        h1 { color: #333; text-align: center; }
        h2 { color: #555; }
        nav { background: #007bff; padding: 10px; text-align: center; }
        nav a { color: white; margin: 0 15px; text-decoration: none; font-size: 18px; }
        nav a:hover { text-decoration: underline; }
        #chat-container { width: 60%; margin: auto; text-align: center; }
        #response { border: 1px solid #ddd; padding: 10px; margin-top: 10px; min-height: 50px; }
        .btn { padding: 10px; margin: 5px; cursor: pointer; border: none; background: #007bff; color: white; }
        .btn:hover { background: #0056b3; }
        .hidden { display: none; }
        .btn-group { display: flex; justify-content: center; gap: 10px; margin-top: 10px; }
        textarea { width: 100%; }
    </style>
    <script src="https://translate.google.com/translate_a/element.js?cb=googleTranslateElementInit"></script>
</head>
<body>
    <nav>
        <a href="#introduction">Introduction</a>
        <a href="#description">Description</a>
        <a href="#features">Features</a>
        <a href="#how-to-use">How to Use</a>
        <a href="#about-us">About Us</a>
        <a href="#chat-with-ai">Chat with AI</a>
    </nav>

    <div id="google_translate_element" style="text-align: right; margin: 10px;"></div>

    <h1 id="greeting"></h1>

    <section id="introduction">
        <h2>Introduction</h2>
        <p>Welcome to TV AI Chatbot, your personal assistant for intelligent conversations. It is designed to provide a seamless interaction between humans and AI.</p>
        <p>Our chatbot is powered by cutting-edge AI technologies, making it the perfect tool for answering questions, providing suggestions, or even having casual conversations.</p>
        <p>Whether you're looking for information, advice, or entertainment, TV AI is here to assist you in real-time.</p>
    </section>

    <section id="description">
        <h2>Description</h2>
        <p>TV AI is a multi-model chatbot that integrates a variety of advanced AI technologies to provide intelligent responses and assist you in many ways.</p>
        <p>Each AI model used in TV AI offers unique capabilities to cater to different user needs and preferences.</p>
        <p>TV AI understands natural language, making it easy to interact with and ask questions in a conversational way.</p>
    </section>

    <section id="features">
        <h2>Features</h2>
        <ul>
            <li>Multiple AI models to choose from, each with unique strengths</li>
            <li>Real-time responses to keep conversations flowing</li>
            <li>Smart assistance for both personal and professional use</li>
            <li>Flexible conversation styles to suit different user preferences</li>
            <li>Continuous improvement through user interaction and feedback</li>
            <li>Save responses in different formats: TXT, HTML, and MD</li>
            <li>Auto-copy code generated by the bot</li>
            <li>Paste prompt functionality</li>
            <li>English language support for detection and translation</li>
            <li>Manage chat history: view, delete, export</li>
            <li>Search on Google for any query</li>
        </ul>
    </section>

    <section id="how-to-use">
        <h2>How to Use</h2>
        <p>Type your message in the input box, then click the "Send Prompt" button to interact with the AI. You can also load a previously saved prompt by clicking the "Open Prompt" button.</p>
        <p>Click the "New Chat" button to start a fresh conversation.</p>
    </section>

    <section id="about-us">
        <h2>About Us</h2>
        <p>TV AI is developed by Tech Visionary, led by Sujan Rai, to provide a tech exploration platform for AI interaction.</p>
        <p>Join us on social media: <a href="t.me/techvisionarynepal">Join our Telegram channel</a></p>
    </section>

    <section id="chat-with-ai">
        <h2>Chat with AI</h2>
        <div id="chat-container">
            <div id="you-asked" class="hidden">
                <h1>You Asked</h1>
                <p id="user-question"></p>
            </div>
            
            <div id="response" class="hidden">
                <h2>TV AI Responded</h2>
                <p id="ai-response">TV AI is typing...</p>
            </div>
            <textarea id="user-input" rows="10" cols="80" placeholder="Ask me anything..."></textarea><br>
            <div class="btn-group">
                <button class="btn" onclick="sendPrompt()">Send Prompt</button>
                <button class="btn" onclick="clearChat()">New Chat</button>
                <button class="btn" onclick="openPrompt()">Open Prompt</button>
                <button class="btn" onclick="pastePrompt()">Paste Prompt</button>
                <button class="btn" onclick="searchGoogle()">Search Google</button>
            </div>

            <div class="btn-group">
                <button class="btn" onclick="copyResponse()">Copy Response</button>
                <button class="btn" onclick="saveResponse()">Save Response</button>
                <button class="btn" onclick="exportHistory()">Export History</button>
                <button class="btn" onclick="deleteHistory()">Delete History</button>
            </div>



            <div id="history-container" class="hidden">
                <h2>Chat History</h2>
                <ul id="history-list"></ul>
            </div>
        </div>
    </section>

    <script>
        // Initialize chat history from localStorage
        let chatHistory = JSON.parse(localStorage.getItem('chatHistory')) || [];

        function googleTranslateElementInit() {
            new google.translate.TranslateElement({pageLanguage: 'en'}, 'google_translate_element');
        }

        function updateGreeting() {
            const now = new Date();
            const hours = now.getHours();
            const minutes = now.getMinutes().toString().padStart(2, '0');
            const seconds = now.getSeconds().toString().padStart(2, '0');
            const timeString = `${hours}:${minutes}:${seconds}`;
            const dateString = now.toDateString();
            
            let greeting;
            if (hours < 12) {
                greeting = "Good morning";
            } else if (hours < 18) {
                greeting = "Good afternoon";
            } else {
                greeting = "Good evening";
            }

            document.getElementById('greeting').innerText = `${greeting}, today is ${dateString} and it's ${timeString}.`;
        }

        setInterval(updateGreeting, 1000);

        function sendPrompt() {
            const userInput = document.getElementById('user-input').value;
            if (!userInput.trim()) return;

            // Show user input under "You Asked"
            document.getElementById('user-question').innerText = userInput;
            document.getElementById('you-asked').classList.remove('hidden');
            document.getElementById('response').classList.remove('hidden');
            
            document.getElementById('ai-response').innerText = 'TV AI is typing...';

            const apiGemini = "AIzaSyDYeLxp7Jp5qSypbVBPy9v_XYmz7Sc1qfs";
            const headers = { 'Content-Type': 'application/json' };
            const data = {
                "contents": [{
                    "parts": [{
                        "text": userInput
                    }]
                }]
            };

            fetch(`https://generativelanguage.googleapis.com/v1beta/models/gemini-1.5-flash-latest:generateContent?key=${apiGemini}`, {
                method: 'POST',
                headers: headers,
                body: JSON.stringify(data)
            })
            .then(response => response.json())
            .then(data => {
                document.getElementById('ai-response').innerText = data.candidates[0].content.parts[0].text;
                saveToHistory(userInput, data.candidates[0].content.parts[0].text);
            })
            .catch(error => {
                document.getElementById('ai-response').innerText = "Error: " + error.message;
            });

            // Clear input after sending
            document.getElementById('user-input').value = '';
        }

        function saveToHistory(userInput, aiResponse) {
            const chat = { userInput, aiResponse, date: new Date().toLocaleString() };
            chatHistory.push(chat);
            localStorage.setItem('chatHistory', JSON.stringify(chatHistory));
            showHistory();
        }

        function showHistory() {
            const historyList = document.getElementById('history-list');
            historyList.innerHTML = '';
            if (chatHistory.length === 0) {
                document.getElementById('history-container').classList.add('hidden');
            } else {
                document.getElementById('history-container').classList.remove('hidden');
                chatHistory.forEach((chat, index) => {
                    const listItem = document.createElement('li');
                    listItem.innerText = `${chat.date}: ${chat.userInput} -> ${chat.aiResponse}`;
                    historyList.appendChild(listItem);
                });
            }
        }

        function clearChat() {
            document.getElementById('user-input').value = '';
            document.getElementById('you-asked').classList.add('hidden');
            document.getElementById('response').classList.add('hidden');
        }

        function openPrompt() {
            const file = prompt("Enter file path to open prompt (simulate loading a text file):");
            if (file) {
                document.getElementById('user-input').value = file; // Simulate loading the file content
            }
        }

        function pastePrompt() {
            navigator.clipboard.readText().then(text => {
                document.getElementById('user-input').value = text;
            });
        }

        function copyResponse() {
            const response = document.getElementById('ai-response').innerText;
            navigator.clipboard.writeText(response).then(() => {
                alert('Response copied to clipboard!');
            });
        }

        function saveResponse() {
            const response = document.getElementById('ai-response').innerText;
            const format = prompt("Choose format to save response (txt, html, md):");

            if (format === 'txt') {
                saveFile(response, 'response.txt');
            } else if (format === 'html') {
                saveFile(`<html><body>${response}</body></html>`, 'response.html');
            } else if (format === 'md') {
                saveFile(`## AI Response\n\n${response}`, 'response.md');
            } else {
                alert("Invalid format selected.");
            }
        }

        function saveFile(content, filename) {
            const blob = new Blob([content], { type: 'text/plain' });
            const link = document.createElement('a');
            link.href = URL.createObjectURL(blob);
            link.download = filename;
            link.click();
        }

        function exportHistory() {
            const historyData = JSON.stringify(chatHistory, null, 2);
            saveFile(historyData, 'chat_history.json');
        }

        function deleteHistory() {
            localStorage.removeItem('chatHistory');
            chatHistory = [];
            showHistory();
        }

        function searchGoogle() {
            const query = document.getElementById('user-input').value;
            if (query.trim()) {
                window.open(`https://www.google.com/search?q=${encodeURIComponent(query)}`, '_blank');
            }
        }

        showHistory();
    </script>

</body>
</html>
